(()=>{"use strict";var __webpack_modules__={594:()=>{eval("\n;// CONCATENATED MODULE: ./src/modules/services.js\nconst fetchData = async (url, method, data) => {\r\n  let res;\r\n\r\n  if (method == 'POST') {\r\n    res = await fetch(url, {\r\n      method: method,\r\n      body: data,\r\n      headers: { 'Content-type': 'application/json' },\r\n    });\r\n  } else {\r\n    res = await fetch(url);\r\n  }\r\n\r\n  if (!res.ok) throw new Error(`Ошибка запроса по адресу ${url}, статус: ${res.status}`);\r\n\r\n  return await res.json();\r\n};\r\n\r\nconst clearLS = () => {\r\n  if (!localStorage.getItem('user777')) {\r\n    localStorage.clear();\r\n    localStorage.setItem('user777', 'hello!');\r\n  }\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/tabs.js\nconst tabs = (content, tab) => {\r\n  const tabcontents = document.querySelectorAll(content);\r\n  const tabs = document.querySelectorAll(tab);\r\n\r\n  const hideContent = () => {\r\n    tabcontents.forEach((content) => content.classList.remove('active', 'fade'));\r\n    tabs.forEach((tab) => tab.classList.remove('active'));\r\n  };\r\n\r\n  const showContent = (i) => {\r\n    tabcontents[i].classList.add('active', 'fade');\r\n    tabs[i].classList.add('active');\r\n  };\r\n\r\n  tabs.forEach((tab, i) => {\r\n    tab.addEventListener('click', () => {\r\n      hideContent();\r\n      showContent(i);\r\n    });\r\n  });\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/slider.js\nconst slider = (sliderEl, slide, prevBtn, nextBtn, curSlide, totalSlides) => {\r\n  const slider = document.querySelector(sliderEl);\r\n  const slides = slider.querySelectorAll(slide);\r\n  const btnPrev = slider.querySelector(prevBtn);\r\n  const btnNext = slider.querySelector(nextBtn);\r\n  const current = slider.querySelector(curSlide);\r\n  const total = slider.querySelector(totalSlides);\r\n\r\n  let ind = 0;\r\n\r\n  const normalizeNum = (num) => (num < 10 ? `0${num}` : num);\r\n\r\n  total.textContent = normalizeNum(slides.length);\r\n  current.textContent = normalizeNum(ind + 1);\r\n\r\n  const controls = document.createElement('div');\r\n  controls.classList.add('slider-controls');\r\n  slider.append(controls);\r\n\r\n  for (let i = 0; i < slides.length; i++) {\r\n    const dot = document.createElement('div');\r\n    dot.classList.add('slider-dot');\r\n    if (i == ind) dot.classList.add('active');\r\n    controls.append(dot);\r\n  }\r\n\r\n  const dots = controls.querySelectorAll('.slider-dot');\r\n\r\n  const hideSlide = (direction) => {\r\n    slider.classList.add('lock');\r\n    slides[ind].classList.add(direction);\r\n\r\n    const deactivateSlide = (e) => e.target.classList.remove('active', direction);\r\n    slides[ind].addEventListener('animationend', (e) => deactivateSlide(e), { once: true });\r\n  };\r\n\r\n  const showSlide = (direction) => {\r\n    current.textContent = normalizeNum(ind + 1);\r\n    controls.querySelector('.slider-dot.active').classList.remove('active');\r\n    dots[ind].classList.add('active');\r\n\r\n    slides[ind].classList.add('next', direction);\r\n\r\n    const activateSlide = (e) => {\r\n      e.target.classList.remove('next', direction);\r\n      e.target.classList.add('active');\r\n      slider.classList.remove('lock');\r\n    };\r\n\r\n    slides[ind].addEventListener('animationend', (e) => activateSlide(e), { once: true });\r\n  };\r\n\r\n  const showLeftSlide = (i) => {\r\n    hideSlide('to-right');\r\n    i || i == 0 ? (ind = i) : (ind = (ind - 1 + slides.length) % slides.length);\r\n    showSlide('from-left');\r\n  };\r\n\r\n  const showRightSlide = (i) => {\r\n    hideSlide('to-left');\r\n    i || i == 0 ? (ind = i) : (ind = (ind + 1) % slides.length);\r\n    showSlide('from-right');\r\n  };\r\n\r\n  btnPrev.addEventListener('click', () => showLeftSlide());\r\n  btnNext.addEventListener('click', () => showRightSlide());\r\n\r\n  dots.forEach((dot, i) => {\r\n    dot.addEventListener('click', () => (i < ind ? showLeftSlide(i) : showRightSlide(i)));\r\n  });\r\n\r\n  let sliderTimerId = setInterval(() => showRightSlide(), 2500);\r\n\r\n  slider.addEventListener('pointerover', () => clearInterval(sliderTimerId));\r\n  slider.addEventListener('pointerout', () => (sliderTimerId = setInterval(() => showRightSlide(), 2500)));\r\n\r\n  // ----------------------------------------------------\r\n\r\n  const swipeSlides = () => {\r\n    const surface = slider.querySelector('.offer__slider-wrapper');\r\n\r\n    let startX, startY, distX, distY, startTime, elapsedTime;\r\n    const minDistX = 50;\r\n    const maxDistY = 100;\r\n    const maxTime = 300;\r\n\r\n    const startActions = (e) => {\r\n      if (e.type == 'mousedown') e.preventDefault();\r\n      if (e.type == 'touchstart') e = e.changedTouches[0];\r\n\r\n      startX = e.pageX;\r\n      startY = e.pageY;\r\n      startTime = new Date().getTime();\r\n    };\r\n\r\n    const endActions = (e) => {\r\n      if (e.type == 'mouseup') e.preventDefault();\r\n      if (e.type == 'touchend') e = e.changedTouches[0];\r\n\r\n      distX = e.pageX - startX;\r\n      distY = e.pageY - startY;\r\n      elapsedTime = new Date().getTime() - startTime;\r\n\r\n      if (elapsedTime <= maxTime && Math.abs(distX) >= minDistX && Math.abs(distY) <= maxDistY) {\r\n        distX > 0 ? showLeftSlide() : showRightSlide();\r\n      }\r\n    };\r\n\r\n    surface.addEventListener('mousedown', (e) => startActions(e));\r\n    surface.addEventListener('mouseup', (e) => endActions(e));\r\n\r\n    surface.addEventListener('touchstart', (e) => startActions(e));\r\n    surface.addEventListener('touchend', (e) => endActions(e));\r\n  };\r\n\r\n  swipeSlides();\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/Modal.js\nconst scrollBar = window.innerWidth - document.documentElement.offsetWidth;\r\n\r\nclass Modal {\r\n  constructor(modal, closeBtn, openBtns) {\r\n    this.modal = document.querySelector(modal);\r\n    this.closeBtn = document.querySelector(closeBtn);\r\n    this.openBtns = document.querySelectorAll(openBtns);\r\n    this.openTimeout;\r\n    this.closeTimeout;\r\n    this.modalHandlers();\r\n  }\r\n\r\n  openModal() {\r\n    this.modal.classList.add('active');\r\n    document.body.style.cssText = `overflow: hidden; padding-right: ${scrollBar}px`;\r\n    if (this.closeTimeout) this.closeTimeout();\r\n    if (this.openTimeout) clearTimeout(this.openTimeout);\r\n  }\r\n\r\n  closeModal() {\r\n    this.modal.classList.remove('active');\r\n    document.body.style = '';\r\n    if (this.closeTimeout) clearTimeout(this.closeTimeout);\r\n  }\r\n\r\n  modalHandlers() {\r\n    this.openBtns.forEach((btn) => btn.addEventListener('click', () => this.openModal()));\r\n\r\n    this.modal.addEventListener('click', (e) => {\r\n      if (e.target === this.modal || e.target === this.closeBtn) this.closeModal();\r\n    });\r\n\r\n    document.addEventListener('keydown', (e) => {\r\n      if (e.code === 'Escape' && this.modal.classList.contains('active')) this.closeModal();\r\n    });\r\n  }\r\n\r\n  scrollHandler() {\r\n    const openModalOnScroll = () => {\r\n      if (window.scrollY + document.documentElement.clientHeight >= document.documentElement.scrollHeight) this.openModal();\r\n    };\r\n    window.addEventListener('scroll', openModalOnScroll, { once: true });\r\n  }\r\n}\r\n\n;// CONCATENATED MODULE: ./src/modules/contact.js\n\r\n\r\n\r\nconst contact = () => {\r\n  const modal = new Modal('.modal', '.modal__close', '[data-modal]');\r\n  modal.openTimeout = setTimeout(() => modal.openModal(), 5000);\r\n  modal.scrollHandler();\r\n\r\n  const thanksModal = new Modal('.thanks-modal', '.modal__close');\r\n  thanksModal.closeTimeout = () => setTimeout(() => thanksModal.closeModal(), 3000);\r\n\r\n  const forms = document.querySelectorAll('form');\r\n\r\n  const message = {\r\n    success: 'Спасибо! Мы скоро с вами свяжемся',\r\n    failure: 'Что-то пошло не так...',\r\n  };\r\n\r\n  const checkData = (form) => {\r\n    const checkInput = (input, reg) => {\r\n      input.value.match(reg) ? input.classList.remove('attention') : input.classList.add('attention');\r\n    };\r\n\r\n    form.addEventListener('input', (e) => {\r\n      if (e.target.getAttribute('name') == 'name') checkInput(e.target, /^([A-Za-zА-Яа-я]+\\s?)[A-Za-zА-Яа-я]*$/);\r\n      if (e.target.getAttribute('name') == 'phone') checkInput(e.target, /^[\\d-]+$/);\r\n    });\r\n  };\r\n\r\n  const showThanksModal = (message) => {\r\n    modal.closeModal();\r\n    thanksModal.modal.querySelector('.modal__title').textContent = message;\r\n    thanksModal.openModal();\r\n  };\r\n\r\n  const postData = (form) => {\r\n    form.addEventListener('submit', (e) => {\r\n      e.preventDefault();\r\n\r\n      if (!form.querySelector('.attention')) {\r\n        const spinner = form.querySelector('.spinner');\r\n        spinner.classList.add('active');\r\n\r\n        const formData = new FormData(form);\r\n        const jsonData = JSON.stringify(Object.fromEntries(formData.entries()));\r\n\r\n        fetchData('https://jsonplaceholder.typicode.com/posts', 'POST', jsonData)\r\n          .then((data) => {\r\n            console.log(data);\r\n            showThanksModal(message.success);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err.message);\r\n            showThanksModal(message.failure);\r\n          })\r\n          .finally(() => {\r\n            form.reset();\r\n            spinner.classList.remove('active');\r\n          });\r\n      }\r\n    });\r\n  };\r\n\r\n  forms.forEach((form) => {\r\n    checkData(form);\r\n    postData(form);\r\n  });\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/calc.js\nconst calc = () => {\n  const calcField = document.querySelector('.calculating__field');\n  const inputs = calcField.querySelectorAll('input');\n  const result = calcField.querySelector('.calculating__result > span');\n\n  const ratio = { low: 1.2, small: 1.375, medium: 1.55, high: 1.725 };\n  const reg = /^[1-9]\\d*|\\d+\\.(\\d{1,2})$/;\n\n  let user = { gender: 'female', level: 'small' };\n\n  const getResult = () => {\n    const { gender, height, weight, age, level } = user;\n\n    if (weight && height && age && !calcField.querySelector('.attention')) {\n      gender == 'female'\n        ? (result.textContent = Math.round((447.6 + 9.2 * weight + 3.1 * height - 4.3 * age) * ratio[level]))\n        : (result.textContent = Math.round((88.36 + 13.4 * weight + 4.8 * height - 5.7 * age) * ratio[level]));\n\n      localStorage.setItem('user', JSON.stringify(user));\n    }\n  };\n\n  if (localStorage.getItem('user')) {\n    user = JSON.parse(localStorage.getItem('user'));\n    inputs.forEach((input) => (input.value = user[input.id]));\n    getResult();\n  }\n\n  calcField.querySelector(`[data-gender=\"${user.gender}\"]`).classList.add('active');\n  calcField.querySelector(`[data-level=\"${user.level}\"]`).classList.add('active');\n\n  calcField.addEventListener('click', (e) => {\n    const btn = e.target;\n    if (btn.dataset.gender || btn.dataset.level) {\n      btn.dataset.gender ? (user.gender = btn.dataset.gender) : (user.level = btn.dataset.level);\n      btn.parentElement.querySelector('.active').classList.remove('active');\n      btn.classList.add('active');\n      getResult();\n    }\n  });\n\n  inputs.forEach((input) => {\n    input.addEventListener('input', () => {\n      if (input.value.match(reg) && +input.value < 300) {\n        input.classList.remove('attention');\n        user[input.id] = +input.value;\n        getResult();\n      } else {\n        input.classList.add('attention');\n        result.textContent = '____';\n      }\n    });\n  });\n};\n\n;// CONCATENATED MODULE: ./src/modules/cards.js\n\r\n\r\nclass MenuCard {\r\n  constructor(src, alt, title, descr, price, parentSelector, ...classes) {\r\n    this.src = src;\r\n    this.alt = alt;\r\n    this.title = title;\r\n    this.descr = descr;\r\n    this.price = price;\r\n    this.container = document.querySelector(parentSelector);\r\n    this.classes = classes;\r\n    this.rate = 70;\r\n    this.changeToRub();\r\n  }\r\n\r\n  changeToRub() {\r\n    this.price = +this.price * this.rate;\r\n  }\r\n\r\n  render() {\r\n    const card = document.createElement('div');\r\n\r\n    this.classes.length ? card.classList.add(...this.classes) : card.classList.add('menu__item');\r\n\r\n    card.innerHTML = `\r\n      <img src=${this.src} alt=${this.alt} />\r\n        <h3 class=\"menu__item-subtitle\">${this.title}</h3>\r\n        <div class=\"menu__item-descr\">${this.descr}</div>\r\n        <div class=\"menu__item-divider\"></div>\r\n        <div class=\"menu__item-price\">\r\n          <div class=\"menu__item-cost\">Цена:</div>\r\n          <div class=\"menu__item-total\"><span>${this.price}</span> руб/день</div>\r\n        </div>\r\n    `;\r\n\r\n    this.container.append(card);\r\n  }\r\n}\r\n\r\nconst cards = () => {\r\n  fetchData('./db.json')\r\n    .then((data) => {\r\n      data.menu.forEach(({ img, altimg, title, descr, price }) => {\r\n        new MenuCard(img, altimg, title, descr, price, '.menu .container').render();\r\n      });\r\n    })\r\n    .catch((err) => console.error(err.message));\r\n};\r\n\n;// CONCATENATED MODULE: ./src/modules/timer.js\nconst timer = (timerEl, deadline, endDay, endMonth) => {\r\n  const timeBoxes = document.querySelectorAll(`${timerEl} span`);\r\n\r\n  deadline = new Date(`${deadline}T00:00:00`);\r\n\r\n  const updateDeadline = () => {\r\n    if (deadline - Date.now() <= 0) {\r\n      const msecPerWeek = 1000 * 60 * 60 * 24 * 7;\r\n      const passedTime = (Date.now() - deadline) % msecPerWeek; // прошедшее время с начала новой недели\r\n      deadline = new Date(Date.now() - passedTime + msecPerWeek); // дедлайн обновляется каждую неделю на 1 неделю вперед\r\n    }\r\n  };\r\n\r\n  const updateDeadlineText = () => {\r\n    const months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'октября', 'ноября', 'декабря'];\r\n\r\n    document.querySelector(endDay).textContent = deadline.getDate();\r\n    document.querySelector(endMonth).textContent = months[deadline.getMonth()];\r\n  };\r\n\r\n  const getTimeRemaining = () => {\r\n    const msec = deadline - Date.now();\r\n\r\n    const days = Math.floor(msec / (1000 * 60 * 60 * 24));\r\n    const hours = Math.floor((msec / (1000 * 60 * 60)) % 24);\r\n    const minutes = Math.floor((msec / (1000 * 60)) % 60);\r\n    const seconds = Math.floor((msec / 1000) % 60);\r\n\r\n    return msec > 0 ? [days, hours, minutes, seconds, msec] : [0, 0, 0, 0, 0];\r\n  };\r\n\r\n  const normalizeNum = (num) => (num < 10 ? `0${num}` : num);\r\n\r\n  const normalizeWord = (num) => {\r\n    if (num % 10 === 1 && num !== 11) {\r\n      return ['день', 'час', 'минута', 'секунда'];\r\n    } else if ((num % 10 === 2 && num !== 12) || (num % 10 === 3 && num !== 13) || (num % 10 === 4 && num !== 14)) {\r\n      return ['дня', 'часа', 'минуты', 'секунды'];\r\n    } else {\r\n      return ['дней', 'часов', 'минут', 'секунд'];\r\n    }\r\n  };\r\n\r\n  const setTimer = () => {\r\n    const timerId = setInterval(updateTimer, 1000);\r\n    updateTimer();\r\n\r\n    function updateTimer() {\r\n      const timeRem = getTimeRemaining();\r\n      if (timeRem[4] <= 1000) clearInterval(timerId);\r\n\r\n      timeBoxes.forEach((timeBox, i) => {\r\n        timeBox.textContent = normalizeNum(timeRem[i]);\r\n        timeBox.nextSibling.textContent = normalizeWord(timeRem[i])[i];\r\n      });\r\n    }\r\n  };\r\n\r\n  updateDeadline();\r\n  updateDeadlineText();\r\n  setTimer();\r\n};\r\n\n;// CONCATENATED MODULE: ./src/index.js\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclearLS();\r\ntabs('.tabcontent', '.tabheader__item');\r\nslider('.offer__slider', '.offer__slide', '.offer__slider-prev', '.offer__slider-next', '#current', '#total');\r\ncontact();\r\ncalc();\r\ncards();\r\ntimer('.timer', '2022-08-08', '#end-day', '#end-month');\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Ozs7QUM3RDZDO0FBQ1A7QUFDSTtBQUNFO0FBQ047QUFDRTtBQUNBO0FBQ3hDO0FBQ0EsT0FBTztBQUNQLElBQUk7QUFDSixNQUFNO0FBQ04sT0FBTztBQUNQLElBQUk7QUFDSixLQUFLO0FBQ0wsS0FBSyIsInNvdXJjZXMiOlsid2VicGFjazovL2Zvb2QtdHJhaW5pbmdqcy8uL3NyYy9tb2R1bGVzL3NlcnZpY2VzLmpzP2Q5NDIiLCJ3ZWJwYWNrOi8vZm9vZC10cmFpbmluZ2pzLy4vc3JjL21vZHVsZXMvdGFicy5qcz9iN2IyIiwid2VicGFjazovL2Zvb2QtdHJhaW5pbmdqcy8uL3NyYy9tb2R1bGVzL3NsaWRlci5qcz9hYWVhIiwid2VicGFjazovL2Zvb2QtdHJhaW5pbmdqcy8uL3NyYy9tb2R1bGVzL01vZGFsLmpzPzgwN2MiLCJ3ZWJwYWNrOi8vZm9vZC10cmFpbmluZ2pzLy4vc3JjL21vZHVsZXMvY29udGFjdC5qcz8xYTFjIiwid2VicGFjazovL2Zvb2QtdHJhaW5pbmdqcy8uL3NyYy9tb2R1bGVzL2NhbGMuanM/MDNkZCIsIndlYnBhY2s6Ly9mb29kLXRyYWluaW5nanMvLi9zcmMvbW9kdWxlcy9jYXJkcy5qcz9kMDEwIiwid2VicGFjazovL2Zvb2QtdHJhaW5pbmdqcy8uL3NyYy9tb2R1bGVzL3RpbWVyLmpzPzhlMDUiLCJ3ZWJwYWNrOi8vZm9vZC10cmFpbmluZ2pzLy4vc3JjL2luZGV4LmpzP2I2MzUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGZldGNoRGF0YSA9IGFzeW5jICh1cmwsIG1ldGhvZCwgZGF0YSkgPT4ge1xyXG4gIGxldCByZXM7XHJcblxyXG4gIGlmIChtZXRob2QgPT0gJ1BPU1QnKSB7XHJcbiAgICByZXMgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgIGJvZHk6IGRhdGEsXHJcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlcyA9IGF3YWl0IGZldGNoKHVybCk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKGDQntGI0LjQsdC60LAg0LfQsNC/0YDQvtGB0LAg0L/QviDQsNC00YDQtdGB0YMgJHt1cmx9LCDRgdGC0LDRgtGD0YE6ICR7cmVzLnN0YXR1c31gKTtcclxuXHJcbiAgcmV0dXJuIGF3YWl0IHJlcy5qc29uKCk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY2xlYXJMUyA9ICgpID0+IHtcclxuICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyNzc3JykpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXI3NzcnLCAnaGVsbG8hJyk7XHJcbiAgfVxyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgdGFicyA9IChjb250ZW50LCB0YWIpID0+IHtcclxuICBjb25zdCB0YWJjb250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29udGVudCk7XHJcbiAgY29uc3QgdGFicyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGFiKTtcclxuXHJcbiAgY29uc3QgaGlkZUNvbnRlbnQgPSAoKSA9PiB7XHJcbiAgICB0YWJjb250ZW50cy5mb3JFYWNoKChjb250ZW50KSA9PiBjb250ZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScsICdmYWRlJykpO1xyXG4gICAgdGFicy5mb3JFYWNoKCh0YWIpID0+IHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd0NvbnRlbnQgPSAoaSkgPT4ge1xyXG4gICAgdGFiY29udGVudHNbaV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJywgJ2ZhZGUnKTtcclxuICAgIHRhYnNbaV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgfTtcclxuXHJcbiAgdGFicy5mb3JFYWNoKCh0YWIsIGkpID0+IHtcclxuICAgIHRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgaGlkZUNvbnRlbnQoKTtcclxuICAgICAgc2hvd0NvbnRlbnQoaSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IHNsaWRlciA9IChzbGlkZXJFbCwgc2xpZGUsIHByZXZCdG4sIG5leHRCdG4sIGN1clNsaWRlLCB0b3RhbFNsaWRlcykgPT4ge1xyXG4gIGNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2xpZGVyRWwpO1xyXG4gIGNvbnN0IHNsaWRlcyA9IHNsaWRlci5xdWVyeVNlbGVjdG9yQWxsKHNsaWRlKTtcclxuICBjb25zdCBidG5QcmV2ID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IocHJldkJ0bik7XHJcbiAgY29uc3QgYnRuTmV4dCA9IHNsaWRlci5xdWVyeVNlbGVjdG9yKG5leHRCdG4pO1xyXG4gIGNvbnN0IGN1cnJlbnQgPSBzbGlkZXIucXVlcnlTZWxlY3RvcihjdXJTbGlkZSk7XHJcbiAgY29uc3QgdG90YWwgPSBzbGlkZXIucXVlcnlTZWxlY3Rvcih0b3RhbFNsaWRlcyk7XHJcblxyXG4gIGxldCBpbmQgPSAwO1xyXG5cclxuICBjb25zdCBub3JtYWxpemVOdW0gPSAobnVtKSA9PiAobnVtIDwgMTAgPyBgMCR7bnVtfWAgOiBudW0pO1xyXG5cclxuICB0b3RhbC50ZXh0Q29udGVudCA9IG5vcm1hbGl6ZU51bShzbGlkZXMubGVuZ3RoKTtcclxuICBjdXJyZW50LnRleHRDb250ZW50ID0gbm9ybWFsaXplTnVtKGluZCArIDEpO1xyXG5cclxuICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGNvbnRyb2xzLmNsYXNzTGlzdC5hZGQoJ3NsaWRlci1jb250cm9scycpO1xyXG4gIHNsaWRlci5hcHBlbmQoY29udHJvbHMpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBkb3QuY2xhc3NMaXN0LmFkZCgnc2xpZGVyLWRvdCcpO1xyXG4gICAgaWYgKGkgPT0gaW5kKSBkb3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICBjb250cm9scy5hcHBlbmQoZG90KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRvdHMgPSBjb250cm9scy5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGVyLWRvdCcpO1xyXG5cclxuICBjb25zdCBoaWRlU2xpZGUgPSAoZGlyZWN0aW9uKSA9PiB7XHJcbiAgICBzbGlkZXIuY2xhc3NMaXN0LmFkZCgnbG9jaycpO1xyXG4gICAgc2xpZGVzW2luZF0uY2xhc3NMaXN0LmFkZChkaXJlY3Rpb24pO1xyXG5cclxuICAgIGNvbnN0IGRlYWN0aXZhdGVTbGlkZSA9IChlKSA9PiBlLnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnLCBkaXJlY3Rpb24pO1xyXG4gICAgc2xpZGVzW2luZF0uYWRkRXZlbnRMaXN0ZW5lcignYW5pbWF0aW9uZW5kJywgKGUpID0+IGRlYWN0aXZhdGVTbGlkZShlKSwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dTbGlkZSA9IChkaXJlY3Rpb24pID0+IHtcclxuICAgIGN1cnJlbnQudGV4dENvbnRlbnQgPSBub3JtYWxpemVOdW0oaW5kICsgMSk7XHJcbiAgICBjb250cm9scy5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyLWRvdC5hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgIGRvdHNbaW5kXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuXHJcbiAgICBzbGlkZXNbaW5kXS5jbGFzc0xpc3QuYWRkKCduZXh0JywgZGlyZWN0aW9uKTtcclxuXHJcbiAgICBjb25zdCBhY3RpdmF0ZVNsaWRlID0gKGUpID0+IHtcclxuICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgnbmV4dCcsIGRpcmVjdGlvbik7XHJcbiAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICBzbGlkZXIuY2xhc3NMaXN0LnJlbW92ZSgnbG9jaycpO1xyXG4gICAgfTtcclxuXHJcbiAgICBzbGlkZXNbaW5kXS5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCAoZSkgPT4gYWN0aXZhdGVTbGlkZShlKSwgeyBvbmNlOiB0cnVlIH0pO1xyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNob3dMZWZ0U2xpZGUgPSAoaSkgPT4ge1xyXG4gICAgaGlkZVNsaWRlKCd0by1yaWdodCcpO1xyXG4gICAgaSB8fCBpID09IDAgPyAoaW5kID0gaSkgOiAoaW5kID0gKGluZCAtIDEgKyBzbGlkZXMubGVuZ3RoKSAlIHNsaWRlcy5sZW5ndGgpO1xyXG4gICAgc2hvd1NsaWRlKCdmcm9tLWxlZnQnKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBzaG93UmlnaHRTbGlkZSA9IChpKSA9PiB7XHJcbiAgICBoaWRlU2xpZGUoJ3RvLWxlZnQnKTtcclxuICAgIGkgfHwgaSA9PSAwID8gKGluZCA9IGkpIDogKGluZCA9IChpbmQgKyAxKSAlIHNsaWRlcy5sZW5ndGgpO1xyXG4gICAgc2hvd1NsaWRlKCdmcm9tLXJpZ2h0Jyk7XHJcbiAgfTtcclxuXHJcbiAgYnRuUHJldi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dMZWZ0U2xpZGUoKSk7XHJcbiAgYnRuTmV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHNob3dSaWdodFNsaWRlKCkpO1xyXG5cclxuICBkb3RzLmZvckVhY2goKGRvdCwgaSkgPT4ge1xyXG4gICAgZG90LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gKGkgPCBpbmQgPyBzaG93TGVmdFNsaWRlKGkpIDogc2hvd1JpZ2h0U2xpZGUoaSkpKTtcclxuICB9KTtcclxuXHJcbiAgbGV0IHNsaWRlclRpbWVySWQgPSBzZXRJbnRlcnZhbCgoKSA9PiBzaG93UmlnaHRTbGlkZSgpLCAyNTAwKTtcclxuXHJcbiAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJvdmVyJywgKCkgPT4gY2xlYXJJbnRlcnZhbChzbGlkZXJUaW1lcklkKSk7XHJcbiAgc2xpZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJvdXQnLCAoKSA9PiAoc2xpZGVyVGltZXJJZCA9IHNldEludGVydmFsKCgpID0+IHNob3dSaWdodFNsaWRlKCksIDI1MDApKSk7XHJcblxyXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uc3Qgc3dpcGVTbGlkZXMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBzdXJmYWNlID0gc2xpZGVyLnF1ZXJ5U2VsZWN0b3IoJy5vZmZlcl9fc2xpZGVyLXdyYXBwZXInKTtcclxuXHJcbiAgICBsZXQgc3RhcnRYLCBzdGFydFksIGRpc3RYLCBkaXN0WSwgc3RhcnRUaW1lLCBlbGFwc2VkVGltZTtcclxuICAgIGNvbnN0IG1pbkRpc3RYID0gNTA7XHJcbiAgICBjb25zdCBtYXhEaXN0WSA9IDEwMDtcclxuICAgIGNvbnN0IG1heFRpbWUgPSAzMDA7XHJcblxyXG4gICAgY29uc3Qgc3RhcnRBY3Rpb25zID0gKGUpID0+IHtcclxuICAgICAgaWYgKGUudHlwZSA9PSAnbW91c2Vkb3duJykgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBpZiAoZS50eXBlID09ICd0b3VjaHN0YXJ0JykgZSA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcblxyXG4gICAgICBzdGFydFggPSBlLnBhZ2VYO1xyXG4gICAgICBzdGFydFkgPSBlLnBhZ2VZO1xyXG4gICAgICBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZW5kQWN0aW9ucyA9IChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnR5cGUgPT0gJ21vdXNldXAnKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGlmIChlLnR5cGUgPT0gJ3RvdWNoZW5kJykgZSA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcblxyXG4gICAgICBkaXN0WCA9IGUucGFnZVggLSBzdGFydFg7XHJcbiAgICAgIGRpc3RZID0gZS5wYWdlWSAtIHN0YXJ0WTtcclxuICAgICAgZWxhcHNlZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZTtcclxuXHJcbiAgICAgIGlmIChlbGFwc2VkVGltZSA8PSBtYXhUaW1lICYmIE1hdGguYWJzKGRpc3RYKSA+PSBtaW5EaXN0WCAmJiBNYXRoLmFicyhkaXN0WSkgPD0gbWF4RGlzdFkpIHtcclxuICAgICAgICBkaXN0WCA+IDAgPyBzaG93TGVmdFNsaWRlKCkgOiBzaG93UmlnaHRTbGlkZSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHN1cmZhY2UuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGUpID0+IHN0YXJ0QWN0aW9ucyhlKSk7XHJcbiAgICBzdXJmYWNlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZSkgPT4gZW5kQWN0aW9ucyhlKSk7XHJcblxyXG4gICAgc3VyZmFjZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHN0YXJ0QWN0aW9ucyhlKSk7XHJcbiAgICBzdXJmYWNlLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKGUpID0+IGVuZEFjdGlvbnMoZSkpO1xyXG4gIH07XHJcblxyXG4gIHN3aXBlU2xpZGVzKCk7XHJcbn07XHJcbiIsImNvbnN0IHNjcm9sbEJhciA9IHdpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbCwgY2xvc2VCdG4sIG9wZW5CdG5zKSB7XHJcbiAgICB0aGlzLm1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb2RhbCk7XHJcbiAgICB0aGlzLmNsb3NlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjbG9zZUJ0bik7XHJcbiAgICB0aGlzLm9wZW5CdG5zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChvcGVuQnRucyk7XHJcbiAgICB0aGlzLm9wZW5UaW1lb3V0O1xyXG4gICAgdGhpcy5jbG9zZVRpbWVvdXQ7XHJcbiAgICB0aGlzLm1vZGFsSGFuZGxlcnMoKTtcclxuICB9XHJcblxyXG4gIG9wZW5Nb2RhbCgpIHtcclxuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZy1yaWdodDogJHtzY3JvbGxCYXJ9cHhgO1xyXG4gICAgaWYgKHRoaXMuY2xvc2VUaW1lb3V0KSB0aGlzLmNsb3NlVGltZW91dCgpO1xyXG4gICAgaWYgKHRoaXMub3BlblRpbWVvdXQpIGNsZWFyVGltZW91dCh0aGlzLm9wZW5UaW1lb3V0KTtcclxuICB9XHJcblxyXG4gIGNsb3NlTW9kYWwoKSB7XHJcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZSA9ICcnO1xyXG4gICAgaWYgKHRoaXMuY2xvc2VUaW1lb3V0KSBjbGVhclRpbWVvdXQodGhpcy5jbG9zZVRpbWVvdXQpO1xyXG4gIH1cclxuXHJcbiAgbW9kYWxIYW5kbGVycygpIHtcclxuICAgIHRoaXMub3BlbkJ0bnMuZm9yRWFjaCgoYnRuKSA9PiBidG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9wZW5Nb2RhbCgpKSk7XHJcblxyXG4gICAgdGhpcy5tb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5tb2RhbCB8fCBlLnRhcmdldCA9PT0gdGhpcy5jbG9zZUJ0bikgdGhpcy5jbG9zZU1vZGFsKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgaWYgKGUuY29kZSA9PT0gJ0VzY2FwZScgJiYgdGhpcy5tb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB0aGlzLmNsb3NlTW9kYWwoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2Nyb2xsSGFuZGxlcigpIHtcclxuICAgIGNvbnN0IG9wZW5Nb2RhbE9uU2Nyb2xsID0gKCkgPT4ge1xyXG4gICAgICBpZiAod2luZG93LnNjcm9sbFkgKyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0ID49IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpIHRoaXMub3Blbk1vZGFsKCk7XHJcbiAgICB9O1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9wZW5Nb2RhbE9uU2Nyb2xsLCB7IG9uY2U6IHRydWUgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IE1vZGFsIH0gZnJvbSAnLi9Nb2RhbCc7XHJcbmltcG9ydCB7IGZldGNoRGF0YSB9IGZyb20gJy4vc2VydmljZXMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbnRhY3QgPSAoKSA9PiB7XHJcbiAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoJy5tb2RhbCcsICcubW9kYWxfX2Nsb3NlJywgJ1tkYXRhLW1vZGFsXScpO1xyXG4gIG1vZGFsLm9wZW5UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBtb2RhbC5vcGVuTW9kYWwoKSwgNTAwMCk7XHJcbiAgbW9kYWwuc2Nyb2xsSGFuZGxlcigpO1xyXG5cclxuICBjb25zdCB0aGFua3NNb2RhbCA9IG5ldyBNb2RhbCgnLnRoYW5rcy1tb2RhbCcsICcubW9kYWxfX2Nsb3NlJyk7XHJcbiAgdGhhbmtzTW9kYWwuY2xvc2VUaW1lb3V0ID0gKCkgPT4gc2V0VGltZW91dCgoKSA9PiB0aGFua3NNb2RhbC5jbG9zZU1vZGFsKCksIDMwMDApO1xyXG5cclxuICBjb25zdCBmb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Zvcm0nKTtcclxuXHJcbiAgY29uc3QgbWVzc2FnZSA9IHtcclxuICAgIHN1Y2Nlc3M6ICfQodC/0LDRgdC40LHQviEg0JzRiyDRgdC60L7RgNC+INGBINCy0LDQvNC4INGB0LLRj9C20LXQvNGB0Y8nLFxyXG4gICAgZmFpbHVyZTogJ9Cn0YLQvi3RgtC+INC/0L7RiNC70L4g0L3QtSDRgtCw0LouLi4nLFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IGNoZWNrRGF0YSA9IChmb3JtKSA9PiB7XHJcbiAgICBjb25zdCBjaGVja0lucHV0ID0gKGlucHV0LCByZWcpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUubWF0Y2gocmVnKSA/IGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2F0dGVudGlvbicpIDogaW5wdXQuY2xhc3NMaXN0LmFkZCgnYXR0ZW50aW9uJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGZvcm0uYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ25hbWUnKSBjaGVja0lucHV0KGUudGFyZ2V0LCAvXihbQS1aYS160JAt0K/QsC3Rj10rXFxzPylbQS1aYS160JAt0K/QsC3Rj10qJC8pO1xyXG4gICAgICBpZiAoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ3Bob25lJykgY2hlY2tJbnB1dChlLnRhcmdldCwgL15bXFxkLV0rJC8pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgc2hvd1RoYW5rc01vZGFsID0gKG1lc3NhZ2UpID0+IHtcclxuICAgIG1vZGFsLmNsb3NlTW9kYWwoKTtcclxuICAgIHRoYW5rc01vZGFsLm1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcbiAgICB0aGFua3NNb2RhbC5vcGVuTW9kYWwoKTtcclxuICB9O1xyXG5cclxuICBjb25zdCBwb3N0RGF0YSA9IChmb3JtKSA9PiB7XHJcbiAgICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgIGlmICghZm9ybS5xdWVyeVNlbGVjdG9yKCcuYXR0ZW50aW9uJykpIHtcclxuICAgICAgICBjb25zdCBzcGlubmVyID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuc3Bpbm5lcicpO1xyXG4gICAgICAgIHNwaW5uZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xyXG4gICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSkpO1xyXG5cclxuICAgICAgICBmZXRjaERhdGEoJ2h0dHBzOi8vanNvbnBsYWNlaG9sZGVyLnR5cGljb2RlLmNvbS9wb3N0cycsICdQT1NUJywganNvbkRhdGEpXHJcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgc2hvd1RoYW5rc01vZGFsKG1lc3NhZ2Uuc3VjY2Vzcyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBzaG93VGhhbmtzTW9kYWwobWVzc2FnZS5mYWlsdXJlKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGZvcm0ucmVzZXQoKTtcclxuICAgICAgICAgICAgc3Bpbm5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICBjaGVja0RhdGEoZm9ybSk7XHJcbiAgICBwb3N0RGF0YShmb3JtKTtcclxuICB9KTtcclxufTtcclxuIiwiZXhwb3J0IGNvbnN0IGNhbGMgPSAoKSA9PiB7XG4gIGNvbnN0IGNhbGNGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYWxjdWxhdGluZ19fZmllbGQnKTtcbiAgY29uc3QgaW5wdXRzID0gY2FsY0ZpZWxkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG4gIGNvbnN0IHJlc3VsdCA9IGNhbGNGaWVsZC5xdWVyeVNlbGVjdG9yKCcuY2FsY3VsYXRpbmdfX3Jlc3VsdCA+IHNwYW4nKTtcblxuICBjb25zdCByYXRpbyA9IHsgbG93OiAxLjIsIHNtYWxsOiAxLjM3NSwgbWVkaXVtOiAxLjU1LCBoaWdoOiAxLjcyNSB9O1xuICBjb25zdCByZWcgPSAvXlsxLTldXFxkKnxcXGQrXFwuKFxcZHsxLDJ9KSQvO1xuXG4gIGxldCB1c2VyID0geyBnZW5kZXI6ICdmZW1hbGUnLCBsZXZlbDogJ3NtYWxsJyB9O1xuXG4gIGNvbnN0IGdldFJlc3VsdCA9ICgpID0+IHtcbiAgICBjb25zdCB7IGdlbmRlciwgaGVpZ2h0LCB3ZWlnaHQsIGFnZSwgbGV2ZWwgfSA9IHVzZXI7XG5cbiAgICBpZiAod2VpZ2h0ICYmIGhlaWdodCAmJiBhZ2UgJiYgIWNhbGNGaWVsZC5xdWVyeVNlbGVjdG9yKCcuYXR0ZW50aW9uJykpIHtcbiAgICAgIGdlbmRlciA9PSAnZmVtYWxlJ1xuICAgICAgICA/IChyZXN1bHQudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKCg0NDcuNiArIDkuMiAqIHdlaWdodCArIDMuMSAqIGhlaWdodCAtIDQuMyAqIGFnZSkgKiByYXRpb1tsZXZlbF0pKVxuICAgICAgICA6IChyZXN1bHQudGV4dENvbnRlbnQgPSBNYXRoLnJvdW5kKCg4OC4zNiArIDEzLjQgKiB3ZWlnaHQgKyA0LjggKiBoZWlnaHQgLSA1LjcgKiBhZ2UpICogcmF0aW9bbGV2ZWxdKSk7XG5cbiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkodXNlcikpO1xuICAgIH1cbiAgfTtcblxuICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3VzZXInKSkge1xuICAgIHVzZXIgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpO1xuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0LnZhbHVlID0gdXNlcltpbnB1dC5pZF0pKTtcbiAgICBnZXRSZXN1bHQoKTtcbiAgfVxuXG4gIGNhbGNGaWVsZC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1nZW5kZXI9XCIke3VzZXIuZ2VuZGVyfVwiXWApLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICBjYWxjRmllbGQucXVlcnlTZWxlY3RvcihgW2RhdGEtbGV2ZWw9XCIke3VzZXIubGV2ZWx9XCJdYCkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgY2FsY0ZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBjb25zdCBidG4gPSBlLnRhcmdldDtcbiAgICBpZiAoYnRuLmRhdGFzZXQuZ2VuZGVyIHx8IGJ0bi5kYXRhc2V0LmxldmVsKSB7XG4gICAgICBidG4uZGF0YXNldC5nZW5kZXIgPyAodXNlci5nZW5kZXIgPSBidG4uZGF0YXNldC5nZW5kZXIpIDogKHVzZXIubGV2ZWwgPSBidG4uZGF0YXNldC5sZXZlbCk7XG4gICAgICBidG4ucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICBidG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICBnZXRSZXN1bHQoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgaWYgKGlucHV0LnZhbHVlLm1hdGNoKHJlZykgJiYgK2lucHV0LnZhbHVlIDwgMzAwKSB7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ2F0dGVudGlvbicpO1xuICAgICAgICB1c2VyW2lucHV0LmlkXSA9ICtpbnB1dC52YWx1ZTtcbiAgICAgICAgZ2V0UmVzdWx0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKCdhdHRlbnRpb24nKTtcbiAgICAgICAgcmVzdWx0LnRleHRDb250ZW50ID0gJ19fX18nO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn07XG4iLCJpbXBvcnQgeyBmZXRjaERhdGEgfSBmcm9tICcuL3NlcnZpY2VzJztcclxuXHJcbmNsYXNzIE1lbnVDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihzcmMsIGFsdCwgdGl0bGUsIGRlc2NyLCBwcmljZSwgcGFyZW50U2VsZWN0b3IsIC4uLmNsYXNzZXMpIHtcclxuICAgIHRoaXMuc3JjID0gc3JjO1xyXG4gICAgdGhpcy5hbHQgPSBhbHQ7XHJcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XHJcbiAgICB0aGlzLmRlc2NyID0gZGVzY3I7XHJcbiAgICB0aGlzLnByaWNlID0gcHJpY2U7XHJcbiAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyZW50U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5jbGFzc2VzID0gY2xhc3NlcztcclxuICAgIHRoaXMucmF0ZSA9IDcwO1xyXG4gICAgdGhpcy5jaGFuZ2VUb1J1YigpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlVG9SdWIoKSB7XHJcbiAgICB0aGlzLnByaWNlID0gK3RoaXMucHJpY2UgKiB0aGlzLnJhdGU7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICBjb25zdCBjYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgdGhpcy5jbGFzc2VzLmxlbmd0aCA/IGNhcmQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNsYXNzZXMpIDogY2FyZC5jbGFzc0xpc3QuYWRkKCdtZW51X19pdGVtJyk7XHJcblxyXG4gICAgY2FyZC5pbm5lckhUTUwgPSBgXHJcbiAgICAgIDxpbWcgc3JjPSR7dGhpcy5zcmN9IGFsdD0ke3RoaXMuYWx0fSAvPlxyXG4gICAgICAgIDxoMyBjbGFzcz1cIm1lbnVfX2l0ZW0tc3VidGl0bGVcIj4ke3RoaXMudGl0bGV9PC9oMz5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudV9faXRlbS1kZXNjclwiPiR7dGhpcy5kZXNjcn08L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwibWVudV9faXRlbS1kaXZpZGVyXCI+PC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cIm1lbnVfX2l0ZW0tcHJpY2VcIj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW51X19pdGVtLWNvc3RcIj7QptC10L3QsDo8L2Rpdj5cclxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJtZW51X19pdGVtLXRvdGFsXCI+PHNwYW4+JHt0aGlzLnByaWNlfTwvc3Bhbj4g0YDRg9CxL9C00LXQvdGMPC9kaXY+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICBgO1xyXG5cclxuICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZChjYXJkKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkcyA9ICgpID0+IHtcclxuICBmZXRjaERhdGEoJy4vZGIuanNvbicpXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBkYXRhLm1lbnUuZm9yRWFjaCgoeyBpbWcsIGFsdGltZywgdGl0bGUsIGRlc2NyLCBwcmljZSB9KSA9PiB7XHJcbiAgICAgICAgbmV3IE1lbnVDYXJkKGltZywgYWx0aW1nLCB0aXRsZSwgZGVzY3IsIHByaWNlLCAnLm1lbnUgLmNvbnRhaW5lcicpLnJlbmRlcigpO1xyXG4gICAgICB9KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSkpO1xyXG59O1xyXG4iLCJleHBvcnQgY29uc3QgdGltZXIgPSAodGltZXJFbCwgZGVhZGxpbmUsIGVuZERheSwgZW5kTW9udGgpID0+IHtcclxuICBjb25zdCB0aW1lQm94ZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAke3RpbWVyRWx9IHNwYW5gKTtcclxuXHJcbiAgZGVhZGxpbmUgPSBuZXcgRGF0ZShgJHtkZWFkbGluZX1UMDA6MDA6MDBgKTtcclxuXHJcbiAgY29uc3QgdXBkYXRlRGVhZGxpbmUgPSAoKSA9PiB7XHJcbiAgICBpZiAoZGVhZGxpbmUgLSBEYXRlLm5vdygpIDw9IDApIHtcclxuICAgICAgY29uc3QgbXNlY1BlcldlZWsgPSAxMDAwICogNjAgKiA2MCAqIDI0ICogNztcclxuICAgICAgY29uc3QgcGFzc2VkVGltZSA9IChEYXRlLm5vdygpIC0gZGVhZGxpbmUpICUgbXNlY1BlcldlZWs7IC8vINC/0YDQvtGI0LXQtNGI0LXQtSDQstGA0LXQvNGPINGBINC90LDRh9Cw0LvQsCDQvdC+0LLQvtC5INC90LXQtNC10LvQuFxyXG4gICAgICBkZWFkbGluZSA9IG5ldyBEYXRlKERhdGUubm93KCkgLSBwYXNzZWRUaW1lICsgbXNlY1BlcldlZWspOyAvLyDQtNC10LTQu9Cw0LnQvSDQvtCx0L3QvtCy0LvRj9C10YLRgdGPINC60LDQttC00YPRjiDQvdC10LTQtdC70Y4g0L3QsCAxINC90LXQtNC10LvRjiDQstC/0LXRgNC10LRcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCB1cGRhdGVEZWFkbGluZVRleHQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtb250aHMgPSBbJ9GP0L3QstCw0YDRjycsICfRhNC10LLRgNCw0LvRjycsICfQvNCw0YDRgtCwJywgJ9Cw0L/RgNC10LvRjycsICfQvNCw0Y8nLCAn0LjRjtC90Y8nLCAn0LjRjtC70Y8nLCAn0LDQstCz0YPRgdGC0LAnLCAn0YHQtdC90YLRj9Cx0YDRjycsICfQvtC60YLRj9Cx0YDRjycsICfQvdC+0Y/QsdGA0Y8nLCAn0LTQtdC60LDQsdGA0Y8nXTtcclxuXHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVuZERheSkudGV4dENvbnRlbnQgPSBkZWFkbGluZS5nZXREYXRlKCk7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVuZE1vbnRoKS50ZXh0Q29udGVudCA9IG1vbnRoc1tkZWFkbGluZS5nZXRNb250aCgpXTtcclxuICB9O1xyXG5cclxuICBjb25zdCBnZXRUaW1lUmVtYWluaW5nID0gKCkgPT4ge1xyXG4gICAgY29uc3QgbXNlYyA9IGRlYWRsaW5lIC0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICBjb25zdCBkYXlzID0gTWF0aC5mbG9vcihtc2VjIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKTtcclxuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcigobXNlYyAvICgxMDAwICogNjAgKiA2MCkpICUgMjQpO1xyXG4gICAgY29uc3QgbWludXRlcyA9IE1hdGguZmxvb3IoKG1zZWMgLyAoMTAwMCAqIDYwKSkgJSA2MCk7XHJcbiAgICBjb25zdCBzZWNvbmRzID0gTWF0aC5mbG9vcigobXNlYyAvIDEwMDApICUgNjApO1xyXG5cclxuICAgIHJldHVybiBtc2VjID4gMCA/IFtkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kcywgbXNlY10gOiBbMCwgMCwgMCwgMCwgMF07XHJcbiAgfTtcclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplTnVtID0gKG51bSkgPT4gKG51bSA8IDEwID8gYDAke251bX1gIDogbnVtKTtcclxuXHJcbiAgY29uc3Qgbm9ybWFsaXplV29yZCA9IChudW0pID0+IHtcclxuICAgIGlmIChudW0gJSAxMCA9PT0gMSAmJiBudW0gIT09IDExKSB7XHJcbiAgICAgIHJldHVybiBbJ9C00LXQvdGMJywgJ9GH0LDRgScsICfQvNC40L3Rg9GC0LAnLCAn0YHQtdC60YPQvdC00LAnXTtcclxuICAgIH0gZWxzZSBpZiAoKG51bSAlIDEwID09PSAyICYmIG51bSAhPT0gMTIpIHx8IChudW0gJSAxMCA9PT0gMyAmJiBudW0gIT09IDEzKSB8fCAobnVtICUgMTAgPT09IDQgJiYgbnVtICE9PSAxNCkpIHtcclxuICAgICAgcmV0dXJuIFsn0LTQvdGPJywgJ9GH0LDRgdCwJywgJ9C80LjQvdGD0YLRiycsICfRgdC10LrRg9C90LTRiyddO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFsn0LTQvdC10LknLCAn0YfQsNGB0L7QsicsICfQvNC40L3Rg9GCJywgJ9GB0LXQutGD0L3QtCddO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHNldFRpbWVyID0gKCkgPT4ge1xyXG4gICAgY29uc3QgdGltZXJJZCA9IHNldEludGVydmFsKHVwZGF0ZVRpbWVyLCAxMDAwKTtcclxuICAgIHVwZGF0ZVRpbWVyKCk7XHJcblxyXG4gICAgZnVuY3Rpb24gdXBkYXRlVGltZXIoKSB7XHJcbiAgICAgIGNvbnN0IHRpbWVSZW0gPSBnZXRUaW1lUmVtYWluaW5nKCk7XHJcbiAgICAgIGlmICh0aW1lUmVtWzRdIDw9IDEwMDApIGNsZWFySW50ZXJ2YWwodGltZXJJZCk7XHJcblxyXG4gICAgICB0aW1lQm94ZXMuZm9yRWFjaCgodGltZUJveCwgaSkgPT4ge1xyXG4gICAgICAgIHRpbWVCb3gudGV4dENvbnRlbnQgPSBub3JtYWxpemVOdW0odGltZVJlbVtpXSk7XHJcbiAgICAgICAgdGltZUJveC5uZXh0U2libGluZy50ZXh0Q29udGVudCA9IG5vcm1hbGl6ZVdvcmQodGltZVJlbVtpXSlbaV07XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHVwZGF0ZURlYWRsaW5lKCk7XHJcbiAgdXBkYXRlRGVhZGxpbmVUZXh0KCk7XHJcbiAgc2V0VGltZXIoKTtcclxufTtcclxuIiwiaW1wb3J0IHsgY2xlYXJMUyB9IGZyb20gJy4vbW9kdWxlcy9zZXJ2aWNlcyc7XHJcbmltcG9ydCB7IHRhYnMgfSBmcm9tICcuL21vZHVsZXMvdGFicyc7XHJcbmltcG9ydCB7IHNsaWRlciB9IGZyb20gJy4vbW9kdWxlcy9zbGlkZXInO1xyXG5pbXBvcnQgeyBjb250YWN0IH0gZnJvbSAnLi9tb2R1bGVzL2NvbnRhY3QnO1xyXG5pbXBvcnQgeyBjYWxjIH0gZnJvbSAnLi9tb2R1bGVzL2NhbGMnO1xyXG5pbXBvcnQgeyBjYXJkcyB9IGZyb20gJy4vbW9kdWxlcy9jYXJkcyc7XHJcbmltcG9ydCB7IHRpbWVyIH0gZnJvbSAnLi9tb2R1bGVzL3RpbWVyJztcclxuXHJcbmNsZWFyTFMoKTtcclxudGFicygnLnRhYmNvbnRlbnQnLCAnLnRhYmhlYWRlcl9faXRlbScpO1xyXG5zbGlkZXIoJy5vZmZlcl9fc2xpZGVyJywgJy5vZmZlcl9fc2xpZGUnLCAnLm9mZmVyX19zbGlkZXItcHJldicsICcub2ZmZXJfX3NsaWRlci1uZXh0JywgJyNjdXJyZW50JywgJyN0b3RhbCcpO1xyXG5jb250YWN0KCk7XHJcbmNhbGMoKTtcclxuY2FyZHMoKTtcclxudGltZXIoJy50aW1lcicsICcyMDIyLTA4LTA4JywgJyNlbmQtZGF5JywgJyNlbmQtbW9udGgnKTtcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///594\n")}},__webpack_exports__={};__webpack_modules__[594]()})();